@using OrderApp.Models.DTO.Form
@model FormGetMainPageDataResponseDTO
@{
    ViewData["Title"] = "Main page";
}
@functions {
    public async Task CreateOrderFilter<T>(string label, string nameTag, IEnumerable<T> options)
    {
        <label for="@nameTag">@label:</label>
        <select data-placeholder="@label" multiple class="chosen-select" name="@nameTag">
            @foreach (var option in options)
            {
                <option>@option</option>
            }
        </select>
    }
}
@section Styles
    {
    <link rel="stylesheet" href="~/lib/chosen/dist/chosen.min.css" />
}
@section Scripts
    {
    <script src="~/lib/chosen/dist/chosen.jquery.min.js"></script>
    <script src="~/js/chosen-activate.js"></script>
}
@section PartialViews
    {
    @await Html.PartialAsync("_CreateOrUpdateOrderModal")
}

<div class="text-center">
    <h1 class="display-4">Main page</h1>

    <button id="add-order-button">Add order</button>

    <label for="order-start-date-filter">Start date:</label>
    <input type="date" id="order-start-date-filter" name="order-start-date-filter" value="@DateTime.Today.AddMonths(-1).ToString("yyyy-MM-dd")" />

    <label for="order-end-date-filter">End date:</label>
    <input type="date" id="order-end-date-filter" name="order-end-date-filter" value="@DateTime.Today.ToString("yyyy-MM-dd")" />

    @{
        await CreateOrderFilter<string>("Order numbers", "order-number-filter", Model.Filter.OrderNumbers);
        await CreateOrderFilter<DateTime>("Order dates", "order-date-filter", Model.Filter.OrderDates);
        await CreateOrderFilter<int>("Order provider ids", "order-provider-id-filter", Model.Filter.OrderProviderIds);
        await CreateOrderFilter<string>("Order item names", "order-item-name-filter", Model.Filter.OrderItemNames);
        await CreateOrderFilter<string>("Order item units", "order-item-unit-filter", Model.Filter.OrderItemUnits);
        await CreateOrderFilter<string>("Provider names", "provider-name-filter", Model.Filter.ProviderNames);
    }

    <button>Submit filter</button>

    <table>
        <tr>
            <th>Number</th>
            <th>Date</th>
        </tr>
        @foreach (var orderRow in Model.OrderRows)
        {
            <tr>
                <td>@orderRow.Number</td>
                <td>@orderRow.Date</td>
            </tr>
        }
    </table>

</div>

